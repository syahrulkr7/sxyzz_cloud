<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sxyzz Cloud - Penyimpanan Virtual Tak Terbatas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#8B5CF6',
                        secondary: '#06B6D4',
                        accent: '#F59E0B',
                        dark: '#1E1B4B',
                        light: '#F0F9FF'
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'spin-slow': 'spin 3s linear infinite',
                        'progress': 'progress 1s ease-in-out infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        progress: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(100%)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1E1B4B 0%, #0F172A 100%);
            min-height: 100vh;
            color: #F0F9FF;
            overflow-x: hidden;
        }
        
        .card-3d {
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        .card-3d:hover {
            transform: rotateY(5deg) rotateX(5deg) translateY(-5px);
            box-shadow: 0 25px 50px -12px rgba(139, 92, 246, 0.5);
        }
        
        .btn-3d {
            position: relative;
            transform: translateZ(20px);
            transition: all 0.3s ease;
        }
        
        .btn-3d:hover {
            transform: translateY(-3px) translateZ(20px);
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.4);
        }
        
        .btn-3d:active {
            transform: translateY(1px) translateZ(20px);
        }
        
        .floating-element {
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-element:nth-child(2) {
            animation-delay: 1s;
        }
        
        .floating-element:nth-child(3) {
            animation-delay: 2s;
        }
        
        .loading-s {
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .loading-s::before,
        .loading-s::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid transparent;
            border-top-color: #8B5CF6;
            animation: spin-slow 1.5s linear infinite;
        }
        
        .loading-s::after {
            border: 8px solid transparent;
            border-bottom-color: #06B6D4;
            animation: spin-slow 1.5s linear infinite reverse;
        }
        
        .login-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .login-content {
            position: relative;
            background: linear-gradient(135deg, #1E1B4B 0%, #312E81 100%);
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transform: translateY(0);
            transition: transform 0.5s ease;
        }
        
        .login-content.active {
            transform: translateY(0);
        }
        
        .form-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            padding: 12px 15px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: #8B5CF6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
        }
        
        .file-item {
            transition: all 0.3s ease;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .file-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .dashboard {
            display: none;
        }
        
        .icon-bounce {
            animation: bounce-slow 2s infinite;
        }
        
        .gradient-text {
            background: linear-gradient(90deg, #8B5CF6, #06B6D4, #F59E0B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .neon-glow {
            text-shadow: 0 0 5px #8B5CF6, 0 0 10px #8B5CF6, 0 0 15px #8B5CF6, 0 0 20px #8B5CF6;
        }
        
        @keyframes spin-slow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .cloud-background {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
        }
        
        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            filter: blur(20px);
        }
        
        .cloud:nth-child(1) {
            width: 200px;
            height: 60px;
            top: 10%;
            left: 10%;
            animation: float 20s linear infinite;
        }
        
        .cloud:nth-child(2) {
            width: 300px;
            height: 80px;
            top: 30%;
            right: 10%;
            animation: float 25s linear infinite reverse;
        }
        
        .cloud:nth-child(3) {
            width: 250px;
            height: 70px;
            bottom: 20%;
            left: 20%;
            animation: float 30s linear infinite;
        }
        
        .preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            backdrop-filter: blur(10px);
        }
        
        .preview-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            margin: 2% auto;
            background: #1E1B4B;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        
        .preview-body {
            padding: 20px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 70vh;
            display: block;
            margin: 0 auto;
            border-radius: 10px;
        }
        
        .preview-video {
            width: 100%;
            max-height: 70vh;
            border-radius: 10px;
        }
        
        .preview-document {
            width: 100%;
            height: 70vh;
            border: none;
            border-radius: 10px;
        }
        
        .password-strength {
            height: 5px;
            border-radius: 5px;
            margin-top: 5px;
            transition: all 0.3s ease;
        }
        
        .strength-weak {
            width: 25%;
            background: #EF4444;
        }
        
        .strength-medium {
            width: 50%;
            background: #F59E0B;
        }
        
        .strength-strong {
            width: 75%;
            background: #10B981;
        }
        
        .strength-very-strong {
            width: 100%;
            background: #06B6D4;
        }
        
        .notification {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .upload-progress {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 3000;
            backdrop-filter: blur(5px);
        }
        
        .upload-content {
            position: relative;
            background: linear-gradient(135deg, #1E1B4B 0%, #312E81 100%);
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            max-width: 90%;
            max-height: 90%;
            margin: 2% auto;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6, #06B6D4);
            border-radius: 3px;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .upload-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .upload-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .upload-icon {
            margin-right: 10px;
            font-size: 20px;
        }
        
        .upload-details {
            flex: 1;
        }
        
        .upload-name {
            font-size: 14px;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .upload-status {
            font-size: 12px;
            color: #06B6D4;
        }
        
        .loading-dots:after {
            content: '';
            animation: dots 1.5s steps(5, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .file-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .file-thumbnail {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }
        
        .file-info {
            padding: 10px;
        }
        
        .file-actions {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .upload-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .upload-body {
            padding: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .upload-footer {
            padding: 15px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Background Clouds -->
    <div class="cloud-background">
        <div class="cloud"></div>
        <div class="cloud"></div>
        <div class="cloud"></div>
    </div>

    <!-- Upload Progress Modal -->
    <div id="uploadProgress" class="upload-progress">
        <div class="upload-content">
            <div class="upload-header">
                <h3 class="text-xl font-bold gradient-text">Mengupload File</h3>
                <button id="closeUpload" class="text-gray-400 hover:text-white text-xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="upload-body">
                <div id="uploadList">
                    <!-- Upload items will be dynamically added here -->
                </div>
            </div>
            <div class="upload-footer">
                <button id="cancelUpload" class="btn-3d w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 rounded-lg transition duration-300">
                    Batalkan Semua Upload
                </button>
            </div>
        </div>
    </div>

    <!-- Beranda -->
    <div id="homepage" class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="py-6 px-4 md:px-8 lg:px-16">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <div class="loading-s"></div>
                    <h1 class="text-2xl md:text-3xl font-bold gradient-text">Sxyzz Cloud</h1>
                </div>
                <button id="loginBtn" class="btn-3d bg-primary hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-full transition duration-300 flex items-center space-x-2">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Login</span>
                </button>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="flex-grow flex items-center justify-center px-4 py-10">
            <div class="container mx-auto text-center">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-4xl md:text-6xl font-bold mb-6 neon-glow">Penyimpanan Virtual <span class="gradient-text">Tak Terbatas</span></h2>
                    <p class="text-lg md:text-xl mb-10 text-gray-300">Simpan video, foto, dan dokumen Anda dengan aman di cloud. Akses kapan saja, di mana saja.</p>
                    
                    <div class="flex flex-wrap justify-center gap-6 mb-16">
                        <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl w-64">
                            <div class="text-4xl text-secondary mb-4 icon-bounce">
                                <i class="fas fa-video"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Video</h3>
                            <p class="text-gray-300">Simpan video dengan kualitas tinggi tanpa kompresi.</p>
                        </div>
                        
                        <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl w-64">
                            <div class="text-4xl text-accent mb-4 icon-bounce">
                                <i class="fas fa-images"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Foto</h3>
                            <p class="text-gray-300">Simpan koleksi foto Anda dengan keamanan terbaik.</p>
                        </div>
                        
                        <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl w-64">
                            <div class="text-4xl text-primary mb-4 icon-bounce">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Dokumen</h3>
                            <p class="text-gray-300">Simpan dokumen penting dengan enkripsi end-to-end.</p>
                        </div>
                    </div>
                    
                    <button id="getStartedBtn" class="btn-3d bg-gradient-to-r from-primary to-secondary text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300">
                        Mulai Sekarang
                    </button>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-16 px-4">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 gradient-text">Fitur Unggulan</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl">
                        <div class="text-3xl text-secondary mb-4">
                            <i class="fas fa-infinity"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Penyimpanan Tak Terbatas</h3>
                        <p class="text-gray-300">Simpan sebanyak yang Anda mau tanpa khawatir kehabisan ruang.</p>
                    </div>
                    
                    <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl">
                        <div class="text-3xl text-accent mb-4">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Keamanan Tingkat Tinggi</h3>
                        <p class="text-gray-300">Data Anda diamankan dengan enkripsi mutakhir.</p>
                    </div>
                    
                    <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl">
                        <div class="text-3xl text-primary mb-4">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Sinkronisasi Otomatis</h3>
                        <p class="text-gray-300">File Anda selalu tersinkron di semua perangkat.</p>
                    </div>
                    
                    <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl">
                        <div class="text-3xl text-secondary mb-4">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Akses Cepat</h3>
                        <p class="text-gray-300">Download dan upload file dengan kecepatan tinggi.</p>
                    </div>
                    
                    <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl">
                        <div class="text-3xl text-accent mb-4">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Responsif</h3>
                        <p class="text-gray-300">Akses dari perangkat apa pun dengan tampilan optimal.</p>
                    </div>
                    
                    <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl">
                        <div class="text-3xl text-primary mb-4">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">Backup Otomatis</h3>
                        <p class="text-gray-300">Data Anda secara otomatis di-backup untuk mencegah kehilangan.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-8 px-4 border-t border-gray-800 mt-auto">
            <div class="container mx-auto text-center">
                <p class="text-gray-400">Â© 2023 Sxyzz Cloud. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard min-h-screen">
        <!-- Header Dashboard -->
        <header class="py-4 px-4 md:px-8 lg:px-16 bg-dark bg-opacity-70">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <div class="loading-s"></div>
                    <h1 class="text-xl md:text-2xl font-bold gradient-text">Sxyzz Cloud</h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-2 bg-dark bg-opacity-50 px-4 py-2 rounded-full">
                        <i class="fas fa-user text-primary"></i>
                        <span id="usernameDisplay" class="font-medium">Pengguna</span>
                    </div>
                    <button id="changePasswordBtn" class="btn-3d bg-secondary hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-full text-sm transition duration-300">
                        <i class="fas fa-key"></i> Ganti Password
                    </button>
                    <button id="logoutBtn" class="btn-3d bg-accent hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-full text-sm transition duration-300">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Dashboard Content -->
        <main class="py-8 px-4 md:px-8 lg:px-16">
            <div class="container mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold mb-4 md:mb-0 gradient-text">Dashboard Sxyzz Cloud</h2>
                    
                    <div class="flex space-x-4">
                        <button id="uploadBtn" class="btn-3d bg-primary hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 flex items-center space-x-2">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>Upload File</span>
                        </button>
                        
                        <div class="relative">
                            <input type="file" id="fileInput" class="hidden" multiple accept="*/*">
                        </div>
                    </div>
                </div>
                
                <!-- Storage Info -->
                <div class="card-3d bg-dark bg-opacity-50 p-6 rounded-2xl mb-8">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold">Penyimpanan Anda</h3>
                        <span class="text-secondary font-bold">Tak Terbatas</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-4">
                        <div id="storageBar" class="bg-gradient-to-r from-primary to-secondary h-4 rounded-full" style="width: 0%"></div>
                    </div>
                    <p id="storageText" class="text-sm text-gray-300 mt-2">Mengitung penggunaan penyimpanan...</p>
                </div>
                
                <!-- File List -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold mb-4 gradient-text">File Anda</h3>
                    
                    <div class="file-grid" id="fileList">
                        <!-- File items will be dynamically added here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Login Popup -->
    <div id="loginPopup" class="login-popup">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="login-content w-full max-w-md">
                <div class="p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold gradient-text">Masuk ke Sxyzz Cloud</h2>
                        <button id="closeLogin" class="text-gray-400 hover:text-white text-xl">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="mb-4">
                        <button id="showLoginForm" class="w-full py-2 px-4 bg-primary text-white font-bold rounded-tl-lg rounded-tr-lg">Login</button>
                        <button id="showRegisterForm" class="w-full py-2 px-4 bg-dark bg-opacity-50 text-gray-300 font-bold rounded-tl-lg rounded-tr-lg">Daftar</button>
                    </div>
                    
                    <!-- Login Form -->
                    <form id="loginForm" class="space-y-4">
                        <div>
                            <label for="loginEmail" class="block text-sm font-medium mb-1">Email</label>
                            <input type="email" id="loginEmail" class="form-input w-full" placeholder="email@contoh.com" required>
                        </div>
                        
                        <div>
                            <label for="loginPassword" class="block text-sm font-medium mb-1">Password</label>
                            <input type="password" id="loginPassword" class="form-input w-full" placeholder="Masukkan password" required>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input type="checkbox" id="rememberMe" class="mr-2" checked>
                                <label for="rememberMe" class="text-sm">Ingat saya</label>
                            </div>
                            <a href="#" class="text-sm text-secondary hover:underline">Lupa password?</a>
                        </div>
                        
                        <button type="submit" class="btn-3d w-full bg-primary hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition duration-300">
                            Masuk
                        </button>
                    </form>
                    
                    <!-- Register Form -->
                    <form id="registerForm" class="space-y-4 hidden">
                        <div>
                            <label for="registerName" class="block text-sm font-medium mb-1">Nama Lengkap</label>
                            <input type="text" id="registerName" class="form-input w-full" placeholder="Nama lengkap" required>
                        </div>
                        
                        <div>
                            <label for="registerEmail" class="block text-sm font-medium mb-1">Email</label>
                            <input type="email" id="registerEmail" class="form-input w-full" placeholder="email@contoh.com" required>
                        </div>
                        
                        <div>
                            <label for="registerPassword" class="block text-sm font-medium mb-1">Password</label>
                            <input type="password" id="registerPassword" class="form-input w-full" placeholder="Buat password" required>
                            <div id="passwordStrength" class="password-strength"></div>
                            <p id="passwordFeedback" class="text-xs mt-1"></p>
                        </div>
                        
                        <div>
                            <label for="registerConfirmPassword" class="block text-sm font-medium mb-1">Konfirmasi Password</label>
                            <input type="password" id="registerConfirmPassword" class="form-input w-full" placeholder="Konfirmasi password" required>
                        </div>
                        
                        <button type="submit" class="btn-3d w-full bg-secondary hover:bg-cyan-600 text-white font-bold py-3 rounded-lg transition duration-300">
                            Daftar
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Popup -->
    <div id="changePasswordPopup" class="login-popup">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="login-content w-full max-w-md">
                <div class="p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold gradient-text">Ganti Password</h2>
                        <button id="closeChangePassword" class="text-gray-400 hover:text-white text-xl">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="changePasswordForm" class="space-y-4">
                        <div>
                            <label for="currentPassword" class="block text-sm font-medium mb-1">Password Saat Ini</label>
                            <input type="password" id="currentPassword" class="form-input w-full" placeholder="Masukkan password saat ini" required>
                        </div>
                        
                        <div>
                            <label for="newPassword" class="block text-sm font-medium mb-1">Password Baru</label>
                            <input type="password" id="newPassword" class="form-input w-full" placeholder="Buat password baru" required>
                            <div id="newPasswordStrength" class="password-strength"></div>
                            <p id="newPasswordFeedback" class="text-xs mt-1"></p>
                        </div>
                        
                        <div>
                            <label for="confirmNewPassword" class="block text-sm font-medium mb-1">Konfirmasi Password Baru</label>
                            <input type="password" id="confirmNewPassword" class="form-input w-full" placeholder="Konfirmasi password baru" required>
                        </div>
                        
                        <button type="submit" class="btn-3d w-full bg-accent hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition duration-300">
                            Ganti Password
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="preview-modal">
        <div class="preview-content">
            <div class="flex justify-between items-center p-4 border-b border-gray-700">
                <h3 id="previewTitle" class="text-lg font-bold">Preview</h3>
                <button id="closePreview" class="text-gray-400 hover:text-white text-xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="preview-body">
                <div id="previewContainer">
                    <!-- Preview content will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulasi database menggunakan localStorage
        const STORAGE_KEY = 'sxyzzCloudUsers';
        const CURRENT_USER_KEY = 'sxyzzCloudCurrentUser';
        const USER_FILES_KEY_PREFIX = 'sxyzzCloudFiles_';
        
        // Variabel global untuk mengelola upload
        let currentUploads = [];
        let isUploading = false;
        let uploadCanceled = false;
        let uploadInBackground = false;
        
        // Inisialisasi data jika belum ada
        function initializeData() {
            if (!localStorage.getItem(STORAGE_KEY)) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify({}));
            }
        }
        
        // Mendapatkan data pengguna
        function getUsers() {
            return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
        }
        
        // Menyimpan data pengguna
        function saveUsers(users) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
        }
        
        // Mendapatkan pengguna saat ini
        function getCurrentUser() {
            return localStorage.getItem(CURRENT_USER_KEY);
        }
        
        // Menyimpan pengguna saat ini
        function setCurrentUser(email) {
            if (email) {
                localStorage.setItem(CURRENT_USER_KEY, email);
            } else {
                localStorage.removeItem(CURRENT_USER_KEY);
            }
        }
        
        // Mendapatkan file pengguna
        function getUserFiles(email) {
            const key = USER_FILES_KEY_PREFIX + email;
            return JSON.parse(localStorage.getItem(key)) || [];
        }
        
        // Menyimpan file pengguna
        function saveUserFiles(email, files) {
            const key = USER_FILES_KEY_PREFIX + email;
            localStorage.setItem(key, JSON.stringify(files));
        }
        
        // Mendapatkan IP pengguna menggunakan API
        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Gagal mendapatkan IP:', error);
                // Fallback ke IP acak jika API gagal
                return '192.168.' + Math.floor(Math.random() * 255) + '.' + Math.floor(Math.random() * 255);
            }
        }
        
        // Validasi kekuatan password
        function checkPasswordStrength(password) {
            let strength = 0;
            let feedback = '';
            
            if (password.length >= 8) strength++;
            if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++;
            if (password.match(/\d/)) strength++;
            if (password.match(/[^a-zA-Z\d]/)) strength++;
            
            switch (strength) {
                case 0:
                case 1:
                    return { strength: 'weak', feedback: 'Password terlalu lemah' };
                case 2:
                    return { strength: 'medium', feedback: 'Password cukup' };
                case 3:
                    return { strength: 'strong', feedback: 'Password kuat' };
                case 4:
                    return { strength: 'very-strong', feedback: 'Password sangat kuat' };
                default:
                    return { strength: 'weak', feedback: 'Password terlalu lemah' };
            }
        }
        
        // Format ukuran file
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // Format tanggal
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Baru saja';
            if (diffMins < 60) return `${diffMins} menit yang lalu`;
            if (diffHours < 24) return `${diffHours} jam yang lalu`;
            if (diffDays < 7) return `${diffDays} hari yang lalu`;
            
            return date.toLocaleDateString('id-ID');
        }
        
        // Inisialisasi
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
            
            // Cek apakah pengguna sudah login
            const currentUser = getCurrentUser();
            if (currentUser) {
                showDashboard(currentUser);
            }
            
            // Event Listeners
            document.getElementById('loginBtn').addEventListener('click', showLoginPopup);
            document.getElementById('getStartedBtn').addEventListener('click', showLoginPopup);
            document.getElementById('closeLogin').addEventListener('click', hideLoginPopup);
            document.getElementById('showLoginForm').addEventListener('click', showLoginForm);
            document.getElementById('showRegisterForm').addEventListener('click', showRegisterForm);
            document.getElementById('logoutBtn').addEventListener('click', logout);
            document.getElementById('changePasswordBtn').addEventListener('click', showChangePasswordPopup);
            document.getElementById('closeChangePassword').addEventListener('click', hideChangePasswordPopup);
            document.getElementById('uploadBtn').addEventListener('click', triggerFileUpload);
            document.getElementById('fileInput').addEventListener('change', handleFileUpload);
            document.getElementById('closePreview').addEventListener('click', hidePreview);
            document.getElementById('cancelUpload').addEventListener('click', cancelUpload);
            document.getElementById('closeUpload').addEventListener('click', closeUploadPopup);
            
            // Form submissions
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            document.getElementById('changePasswordForm').addEventListener('submit', handleChangePassword);
            
            // Password strength check
            document.getElementById('registerPassword').addEventListener('input', checkRegisterPasswordStrength);
            document.getElementById('newPassword').addEventListener('input', checkNewPasswordStrength);
            
            // Tutup popup ketika klik di luar konten
            document.getElementById('loginPopup').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideLoginPopup();
                }
            });
            
            document.getElementById('changePasswordPopup').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideChangePasswordPopup();
                }
            });
            
            document.getElementById('previewModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hidePreview();
                }
            });
            
            document.getElementById('uploadProgress').addEventListener('click', function(e) {
                if (e.target === this && isUploading) {
                    if (confirm('Tutup popup upload? Upload akan terus berjalan di latar belakang.')) {
                        closeUploadPopup();
                    }
                }
            });
        });
        
        // Tampilkan popup login
        function showLoginPopup() {
            document.getElementById('loginPopup').style.display = 'block';
            showLoginForm();
        }
        
        // Sembunyikan popup login
        function hideLoginPopup() {
            document.getElementById('loginPopup').style.display = 'none';
            document.getElementById('loginForm').reset();
            document.getElementById('registerForm').reset();
        }
        
        // Tampilkan form login
        function showLoginForm() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('showLoginForm').classList.remove('bg-dark', 'text-gray-300');
            document.getElementById('showLoginForm').classList.add('bg-primary', 'text-white');
            document.getElementById('showRegisterForm').classList.remove('bg-primary', 'text-white');
            document.getElementById('showRegisterForm').classList.add('bg-dark', 'bg-opacity-50', 'text-gray-300');
        }
        
        // Tampilkan form register
        function showRegisterForm() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
            document.getElementById('showLoginForm').classList.remove('bg-primary', 'text-white');
            document.getElementById('showLoginForm').classList.add('bg-dark', 'bg-opacity-50', 'text-gray-300');
            document.getElementById('showRegisterForm').classList.remove('bg-dark', 'text-gray-300');
            document.getElementById('showRegisterForm').classList.add('bg-primary', 'text-white');
        }
        
        // Tampilkan popup ganti password
        function showChangePasswordPopup() {
            document.getElementById('changePasswordPopup').style.display = 'block';
        }
        
        // Sembunyikan popup ganti password
        function hideChangePasswordPopup() {
            document.getElementById('changePasswordPopup').style.display = 'none';
            document.getElementById('changePasswordForm').reset();
        }
        
        // Cek kekuatan password saat registrasi
        function checkRegisterPasswordStrength() {
            const password = document.getElementById('registerPassword').value;
            const strengthBar = document.getElementById('passwordStrength');
            const feedback = document.getElementById('passwordFeedback');
            
            const result = checkPasswordStrength(password);
            
            strengthBar.className = 'password-strength strength-' + result.strength;
            feedback.textContent = result.feedback;
            feedback.className = 'text-xs mt-1 ' + 
                (result.strength === 'weak' ? 'text-red-500' : 
                 result.strength === 'medium' ? 'text-yellow-500' : 
                 result.strength === 'strong' ? 'text-green-500' : 'text-cyan-500');
        }
        
        // Cek kekuatan password baru
        function checkNewPasswordStrength() {
            const password = document.getElementById('newPassword').value;
            const strengthBar = document.getElementById('newPasswordStrength');
            const feedback = document.getElementById('newPasswordFeedback');
            
            const result = checkPasswordStrength(password);
            
            strengthBar.className = 'password-strength strength-' + result.strength;
            feedback.textContent = result.feedback;
            feedback.className = 'text-xs mt-1 ' + 
                (result.strength === 'weak' ? 'text-red-500' : 
                 result.strength === 'medium' ? 'text-yellow-500' : 
                 result.strength === 'strong' ? 'text-green-500' : 'text-cyan-500');
        }
        
        // Handle login
        async function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            // Validasi email
            if (!validateEmail(email)) {
                showNotification('Format email tidak valid!', 'error');
                document.getElementById('loginEmail').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('loginEmail').classList.remove('shake');
                }, 500);
                return;
            }
            
            // Validasi password
            if (password.length < 1) {
                showNotification('Password harus diisi!', 'error');
                document.getElementById('loginPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('loginPassword').classList.remove('shake');
                }, 500);
                return;
            }
            
            const users = getUsers();
            
            if (users[email] && users[email].password === password) {
                // Dapatkan IP pengguna
                const userIP = await getUserIP();
                
                // Simpan IP pengguna
                users[email].ip = userIP;
                users[email].lastLogin = new Date().toISOString();
                saveUsers(users);
                
                if (rememberMe) {
                    setCurrentUser(email);
                }
                
                showDashboard(email);
                hideLoginPopup();
                
                // Tampilkan pesan sukses
                showNotification('Login berhasil!', 'success');
            } else {
                showNotification('Email atau password salah!', 'error');
                document.getElementById('loginForm').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('loginForm').classList.remove('shake');
                }, 500);
            }
        }
        
        // Handle register
        async function handleRegister(e) {
            e.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            // Validasi nama
            if (name.length < 3) {
                showNotification('Nama harus minimal 3 karakter!', 'error');
                document.getElementById('registerName').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('registerName').classList.remove('shake');
                }, 500);
                return;
            }
            
            // Validasi email
            if (!validateEmail(email)) {
                showNotification('Format email tidak valid!', 'error');
                document.getElementById('registerEmail').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('registerEmail').classList.remove('shake');
                }, 500);
                return;
            }
            
            // Validasi password
            if (password.length < 8) {
                showNotification('Password harus minimal 8 karakter!', 'error');
                document.getElementById('registerPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('registerPassword').classList.remove('shake');
                }, 500);
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Password tidak cocok!', 'error');
                document.getElementById('registerConfirmPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('registerConfirmPassword').classList.remove('shake');
                }, 500);
                return;
            }
            
            const users = getUsers();
            
            if (users[email]) {
                showNotification('Email sudah terdaftar!', 'error');
                document.getElementById('registerEmail').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('registerEmail').classList.remove('shake');
                }, 500);
                return;
            }
            
            // Dapatkan IP pengguna
            const userIP = await getUserIP();
            
            // Simpan pengguna baru
            users[email] = {
                name: name,
                password: password,
                ip: userIP,
                registeredAt: new Date().toISOString(),
                lastLogin: new Date().toISOString()
            };
            
            saveUsers(users);
            
            // Buat penyimpanan file untuk pengguna baru
            saveUserFiles(email, []);
            
            showNotification('Pendaftaran berhasil! Silakan login.', 'success');
            showLoginForm();
        }
        
        // Handle ganti password
        function handleChangePassword(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;
            
            const currentUser = getCurrentUser();
            const users = getUsers();
            
            if (!currentUser || !users[currentUser]) {
                showNotification('Anda harus login untuk mengganti password!', 'error');
                return;
            }
            
            if (users[currentUser].password !== currentPassword) {
                showNotification('Password saat ini salah!', 'error');
                document.getElementById('currentPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('currentPassword').classList.remove('shake');
                }, 500);
                return;
            }
            
            if (newPassword.length < 8) {
                showNotification('Password baru harus minimal 8 karakter!', 'error');
                document.getElementById('newPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('newPassword').classList.remove('shake');
                }, 500);
                return;
            }
            
            if (newPassword === currentPassword) {
                showNotification('Password baru harus berbeda dengan password saat ini!', 'error');
                document.getElementById('newPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('newPassword').classList.remove('shake');
                }, 500);
                return;
            }
            
            if (newPassword !== confirmNewPassword) {
                showNotification('Password baru tidak cocok!', 'error');
                document.getElementById('confirmNewPassword').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('confirmNewPassword').classList.remove('shake');
                }, 500);
                return;
            }
            
            // Update password
            users[currentUser].password = newPassword;
            saveUsers(users);
            
            hideChangePasswordPopup();
            showNotification('Password berhasil diubah!', 'success');
        }
        
        // Validasi email
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        // Tampilkan dashboard
        function showDashboard(email) {
            document.getElementById('homepage').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            const users = getUsers();
            const user = users[email];
            
            if (user) {
                document.getElementById('usernameDisplay').textContent = user.name;
                updateStorageInfo(email);
                loadUserFiles(email);
            }
        }
        
        // Perbarui info penyimpanan
        function updateStorageInfo(email) {
            const files = getUserFiles(email);
            let totalSize = 0;
            
            files.forEach(file => {
                totalSize += file.size;
            });
            
            const storageBar = document.getElementById('storageBar');
            const storageText = document.getElementById('storageText');
            
            // Simulasi penyimpanan tak terbatas dengan persentase kecil
            const percentage = Math.min((totalSize / (10 * 1024 * 1024 * 1024)) * 100, 100); // 10GB sebagai batas simulasi
            
            storageBar.style.width = percentage + '%';
            storageText.textContent = `Anda telah menggunakan ${formatFileSize(totalSize)} dari penyimpanan tak terbatas`;
        }
        
        // Logout
        function logout() {
            setCurrentUser(null);
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('homepage').style.display = 'flex';
            
            showNotification('Anda telah logout.', 'info');
        }
        
        // Trigger upload file
        function triggerFileUpload() {
            document.getElementById('fileInput').click();
        }
        
        // Handle upload file
        function handleFileUpload(e) {
            const files = e.target.files;
            const currentUser = getCurrentUser();
            
            if (!currentUser) {
                showNotification('Anda harus login untuk mengupload file!', 'error');
                return;
            }
            
            if (files.length > 0) {
                // Validasi jumlah file
                if (files.length > 10) {
                    showNotification('Maksimal 10 file dapat diupload sekaligus!', 'error');
                    return;
                }
                
                // Tampilkan modal upload progress
                showUploadProgress(files);
                
                // Mulai proses upload
                startUpload(currentUser, files);
                
                // Reset input file
                e.target.value = '';
            }
        }
        
        // Tampilkan progress upload
        function showUploadProgress(files) {
            const uploadList = document.getElementById('uploadList');
            uploadList.innerHTML = '';
            
            currentUploads = [];
            
            // Tambah setiap file ke daftar upload
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const fileType = getFileType(file.type, file.name);
                let icon, color;
                
                switch (fileType) {
                    case 'image':
                        icon = 'fa-image';
                        color = 'text-accent';
                        break;
                    case 'video':
                        icon = 'fa-video';
                        color = 'text-secondary';
                        break;
                    case 'document':
                        icon = 'fa-file-alt';
                        color = 'text-primary';
                        break;
                    case 'html':
                        icon = 'fa-code';
                        color = 'text-purple-500';
                        break;
                    default:
                        icon = 'fa-file';
                        color = 'text-gray-400';
                }
                
                const uploadItem = document.createElement('div');
                uploadItem.className = 'upload-item';
                uploadItem.id = `upload-${i}`;
                uploadItem.innerHTML = `
                    <div class="upload-info">
                        <div class="upload-icon ${color}">
                            <i class="fas ${icon}"></i>
                        </div>
                        <div class="upload-details">
                            <div class="upload-name">${file.name}</div>
                            <div class="upload-status">Menunggu<span class="loading-dots"></span></div>
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                    <div class="upload-percentage">0%</div>
                `;
                
                uploadList.appendChild(uploadItem);
                
                // Simpan info upload
                currentUploads.push({
                    id: i,
                    file: file,
                    progress: 0,
                    status: 'waiting'
                });
            }
            
            // Tampilkan modal upload
            document.getElementById('uploadProgress').style.display = 'block';
            isUploading = true;
            uploadCanceled = false;
            uploadInBackground = false;
        }
        
        // Mulai proses upload
        async function startUpload(email, files) {
            const userFiles = getUserFiles(email);
            let uploadIndex = 0;
            
            // Fungsi untuk memproses upload satu per satu
            async function processNextUpload() {
                if (uploadCanceled || uploadIndex >= files.length) {
                    // Upload selesai atau dibatalkan
                    finishUpload(email, userFiles);
                    return;
                }
                
                const file = files[uploadIndex];
                const fileType = getFileType(file.type, file.name);
                const fileSize = file.size;
                
                // Validasi ukuran file (maksimal 100MB)
                if (fileSize > 100 * 1024 * 1024) {
                    updateUploadStatus(uploadIndex, 'error', `File terlalu besar (maksimal 100MB)`);
                    uploadIndex++;
                    processNextUpload();
                    return;
                }
                
                // Update status menjadi uploading
                updateUploadStatus(uploadIndex, 'uploading', `Mengupload<span class="loading-dots"></span>`);
                
                // Proses upload dengan progress real-time
                await uploadFileWithProgress(uploadIndex, file, (progress) => {
                    updateUploadProgress(uploadIndex, progress);
                });
                
                if (uploadCanceled) {
                    updateUploadStatus(uploadIndex, 'error', `Dibatalkan`);
                    uploadIndex++;
                    processNextUpload();
                    return;
                }
                
                // Baca file sebagai base64
                const fileData = await readFileAsBase64(file);
                
                if (fileData) {
                    const fileObj = {
                        id: Date.now() + uploadIndex,
                        name: file.name,
                        type: fileType,
                        size: fileSize,
                        uploadDate: new Date().toISOString(),
                        data: fileData
                    };
                    
                    userFiles.push(fileObj);
                    
                    // Update status menjadi completed
                    updateUploadStatus(uploadIndex, 'completed', `Selesai`);
                    
                    // Langsung perbarui UI dengan file yang baru diupload
                    addFileToUI(fileObj);
                    
                    uploadIndex++;
                    processNextUpload();
                } else {
                    updateUploadStatus(uploadIndex, 'error', `Gagal membaca file`);
                    uploadIndex++;
                    processNextUpload();
                }
            }
            
            // Mulai proses upload
            processNextUpload();
        }
        
        // Upload file dengan progress real-time
        function uploadFileWithProgress(index, file, progressCallback) {
            return new Promise(resolve => {
                let progress = 0;
                const totalSize = file.size;
                const chunkSize = 1024 * 1024; // 1MB chunks
                let offset = 0;
                
                function readNextChunk() {
                    if (uploadCanceled || offset >= totalSize) {
                        progressCallback(100);
                        resolve();
                        return;
                    }
                    
                    const chunk = file.slice(offset, offset + chunkSize);
                    offset += chunkSize;
                    
                    progress = Math.min((offset / totalSize) * 100, 100);
                    progressCallback(progress);
                    
                    // Simulasi waktu pemrosesan
                    setTimeout(() => {
                        readNextChunk();
                    }, 50);
                }
                
                readNextChunk();
            });
        }
        
        // Baca file sebagai base64
        function readFileAsBase64(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    resolve(e.target.result);
                };
                
                reader.onerror = function() {
                    resolve(null);
                };
                
                reader.readAsDataURL(file);
            });
        }
        
        // Update progress upload
        function updateUploadProgress(index, progress) {
            const uploadItem = document.getElementById(`upload-${index}`);
            if (uploadItem) {
                const percentageElement = uploadItem.querySelector('.upload-percentage');
                percentageElement.textContent = `${Math.round(progress)}%`;
                
                const progressFill = uploadItem.querySelector('.progress-fill');
                progressFill.style.width = `${progress}%`;
            }
            
            // Update data progress
            if (currentUploads[index]) {
                currentUploads[index].progress = progress;
            }
        }
        
        // Update status upload
        function updateUploadStatus(index, status, message) {
            const uploadItem = document.getElementById(`upload-${index}`);
            if (uploadItem) {
                const statusElement = uploadItem.querySelector('.upload-status');
                statusElement.innerHTML = message;
                
                // Update warna berdasarkan status
                switch (status) {
                    case 'uploading':
                        statusElement.className = 'upload-status text-secondary';
                        break;
                    case 'completed':
                        statusElement.className = 'upload-status text-green-500';
                        break;
                    case 'error':
                        statusElement.className = 'upload-status text-red-500';
                        break;
                    default:
                        statusElement.className = 'upload-status text-gray-400';
                }
            }
            
            // Update data status
            if (currentUploads[index]) {
                currentUploads[index].status = status;
            }
        }
        
        // Selesaikan proses upload
        function finishUpload(email, userFiles) {
            if (uploadCanceled) {
                showNotification('Upload dibatalkan', 'info');
            } else {
                // Simpan file yang berhasil diupload
                saveUserFiles(email, userFiles);
                
                // Perbarui info penyimpanan
                updateStorageInfo(email);
                
                // Tampilkan notifikasi jika upload di latar belakang
                if (uploadInBackground) {
                    showNotification(`Upload selesai! ${userFiles.length} file berhasil diupload`, 'success');
                } else {
                    showNotification(`Upload selesai! ${userFiles.length} file berhasil diupload`, 'success');
                }
            }
            
            // Sembunyikan modal upload jika masih terbuka
            if (!uploadInBackground) {
                setTimeout(() => {
                    document.getElementById('uploadProgress').style.display = 'none';
                    isUploading = false;
                }, 1000);
            } else {
                isUploading = false;
            }
        }
        
        // Batalkan upload
        function cancelUpload() {
            if (!confirm('Apakah Anda yakin ingin membatalkan semua upload?')) {
                return;
            }
            
            uploadCanceled = true;
            isUploading = false;
            uploadInBackground = false;
            
            // Update status semua upload menjadi canceled
            currentUploads.forEach((upload, index) => {
                if (upload.status === 'waiting' || upload.status === 'uploading') {
                    updateUploadStatus(index, 'error', 'Dibatalkan');
                }
            });
            
            showNotification('Upload dibatalkan', 'info');
            
            // Sembunyikan modal upload setelah beberapa detik
            setTimeout(() => {
                document.getElementById('uploadProgress').style.display = 'none';
            }, 1500);
        }
        
        // Tutup popup upload (tanpa membatalkan upload)
        function closeUploadPopup() {
            if (isUploading) {
                // Tanyakan konfirmasi jika masih ada upload yang berjalan
                if (confirm('Tutup popup upload? Upload akan terus berjalan di latar belakang.')) {
                    uploadInBackground = true;
                    document.getElementById('uploadProgress').style.display = 'none';
                    showNotification('Upload berjalan di latar belakang. File akan muncul setelah selesai.', 'info');
                }
            } else {
                document.getElementById('uploadProgress').style.display = 'none';
            }
        }
        
        // Mendapatkan tipe file berdasarkan MIME type dan nama file
        function getFileType(mimeType, fileName) {
            if (mimeType.startsWith('video/')) return 'video';
            if (mimeType.startsWith('image/')) return 'image';
            if (mimeType.startsWith('text/html') || fileName.endsWith('.html') || fileName.endsWith('.htm')) return 'html';
            if (mimeType.startsWith('application/') || mimeType === 'text/plain') return 'document';
            return 'other';
        }
        
        // Memuat file pengguna
        function loadUserFiles(email) {
            const fileList = document.getElementById('fileList');
            const userFiles = getUserFiles(email);
            
            fileList.innerHTML = '';
            
            if (userFiles.length === 0) {
                fileList.innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-500 mb-4"></i>
                        <p class="text-gray-400">Belum ada file. Upload file pertama Anda!</p>
                    </div>
                `;
                return;
            }
            
            userFiles.forEach(file => {
                addFileToUI(file);
            });
        }
        
        // Tambah file ke UI
        function addFileToUI(file) {
            const fileList = document.getElementById('fileList');
            
            let icon, bgColor, thumbnail;
            
            switch (file.type) {
                case 'video':
                    icon = 'fa-video';
                    bgColor = 'bg-secondary';
                    thumbnail = `<i class="fas fa-video ${bgColor.replace('bg-', 'text-')}"></i>`;
                    break;
                case 'image':
                    icon = 'fa-image';
                    bgColor = 'bg-accent';
                    thumbnail = `<img src="${file.data}" alt="${file.name}" class="w-full h-full object-cover">`;
                    break;
                case 'html':
                    icon = 'fa-code';
                    bgColor = 'bg-purple-500';
                    thumbnail = `<i class="fas fa-code ${bgColor.replace('bg-', 'text-')}"></i>`;
                    break;
                case 'document':
                    icon = 'fa-file-alt';
                    bgColor = 'bg-primary';
                    thumbnail = `<i class="fas fa-file-alt ${bgColor.replace('bg-', 'text-')}"></i>`;
                    break;
                default:
                    icon = 'fa-file';
                    bgColor = 'bg-gray-600';
                    thumbnail = `<i class="fas fa-file ${bgColor.replace('bg-', 'text-')}"></i>`;
            }
            
            const fileCard = document.createElement('div');
            fileCard.className = 'file-card';
            fileCard.innerHTML = `
                <div class="file-thumbnail">
                    ${thumbnail}
                </div>
                <div class="file-info">
                    <h4 class="font-medium truncate">${file.name}</h4>
                    <p class="text-sm text-gray-400">${formatFileSize(file.size)}</p>
                    <p class="text-xs text-gray-500">${formatDate(file.uploadDate)}</p>
                </div>
                <div class="file-actions">
                    <button class="text-secondary hover:text-cyan-400 preview-btn" data-file-id="${file.id}">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="text-primary hover:text-purple-400 download-btn" data-file-id="${file.id}">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="text-red-500 hover:text-red-400 delete-btn" data-file-id="${file.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            fileList.appendChild(fileCard);
            
            // Tambah event listeners untuk tombol preview, download, dan delete
            fileCard.querySelector('.preview-btn').addEventListener('click', function() {
                const fileId = parseInt(this.getAttribute('data-file-id'));
                previewFile(getCurrentUser(), fileId);
            });
            
            fileCard.querySelector('.download-btn').addEventListener('click', function() {
                const fileId = parseInt(this.getAttribute('data-file-id'));
                downloadFile(getCurrentUser(), fileId);
            });
            
            fileCard.querySelector('.delete-btn').addEventListener('click', function() {
                const fileId = parseInt(this.getAttribute('data-file-id'));
                deleteFile(getCurrentUser(), fileId);
            });
        }
        
        // Preview file
        function previewFile(email, fileId) {
            const userFiles = getUserFiles(email);
            const file = userFiles.find(f => f.id === fileId);
            
            if (!file) {
                showNotification('File tidak ditemukan!', 'error');
                return;
            }
            
            const previewModal = document.getElementById('previewModal');
            const previewContainer = document.getElementById('previewContainer');
            const previewTitle = document.getElementById('previewTitle');
            
            previewTitle.textContent = file.name;
            previewContainer.innerHTML = '';
            
            let previewContent;
            
            switch (file.type) {
                case 'image':
                    previewContent = `<img src="${file.data}" class="preview-image" alt="${file.name}">`;
                    break;
                case 'video':
                    previewContent = `<video controls class="preview-video"><source src="${file.data}" type="video/mp4">Browser Anda tidak mendukung pemutaran video.</video>`;
                    break;
                case 'html':
                    previewContent = `<iframe src="${file.data}" class="preview-document"></iframe>`;
                    break;
                case 'document':
                    if (file.name.endsWith('.pdf')) {
                        previewContent = `<iframe src="${file.data}" class="preview-document"></iframe>`;
                    } else {
                        previewContent = `<div class="text-center py-8"><i class="fas fa-file-alt text-4xl text-gray-500 mb-4"></i><p class="text-gray-400">Pratinjau tidak tersedia untuk jenis file ini</p><p class="text-sm mt-2"><a href="${file.data}" download="${file.name}" class="text-secondary hover:underline">Download untuk melihat</a></p></div>`;
                    }
                    break;
                default:
                    previewContent = `<div class="text-center py-8"><i class="fas fa-file text-4xl text-gray-500 mb-4"></i><p class="text-gray-400">Pratinjau tidak tersedia untuk jenis file ini</p><p class="text-sm mt-2"><a href="${file.data}" download="${file.name}" class="text-secondary hover:underline">Download untuk melihat</a></p></div>`;
            }
            
            previewContainer.innerHTML = previewContent;
            previewModal.style.display = 'block';
        }
        
        // Sembunyikan preview
        function hidePreview() {
            document.getElementById('previewModal').style.display = 'none';
        }
        
        // Download file
        function downloadFile(email, fileId) {
            const userFiles = getUserFiles(email);
            const file = userFiles.find(f => f.id === fileId);
            
            if (!file) {
                showNotification('File tidak ditemukan!', 'error');
                return;
            }
            
            const a = document.createElement('a');
            a.href = file.data;
            a.download = file.name;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification(`Mendownload ${file.name}`, 'info');
        }
        
        // Hapus file
        function deleteFile(email, fileId) {
            if (!confirm('Apakah Anda yakin ingin menghapus file ini?')) {
                return;
            }
            
            const userFiles = getUserFiles(email);
            const fileIndex = userFiles.findIndex(f => f.id === fileId);
            
            if (fileIndex === -1) {
                showNotification('File tidak ditemukan!', 'error');
                return;
            }
            
            userFiles.splice(fileIndex, 1);
            
            saveUserFiles(email, userFiles);
            
            updateStorageInfo(email);
            loadUserFiles(email);
            
            showNotification('File berhasil dihapus!', 'success');
        }
        
        // Tampilkan notifikasi
        function showNotification(message, type) {
            // Hapus notifikasi sebelumnya jika ada
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = `notification fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                type === 'info' ? 'bg-blue-500' : 'bg-gray-500'
            } text-white`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Tampilkan notifikasi
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Sembunyikan setelah 3 detik
            setTimeout(() => {
                notification.classList.remove('show');
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
